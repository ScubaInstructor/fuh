FROM ubuntu:latest

# gget fresh packages and install python and pip 
RUN apt-get update && apt-get upgrade -y
RUN apt-get install -y python3 python3-pip

# symlinking python
RUN ln -sf python3 /usr/bin/python

# create /app folder
RUN mkdir /app

# copy requirements.txt
COPY requirements.txt /app
RUN pip3 install -r /app/requirements.txt --break-system-packages


# Copying the necessary files to working folder
COPY .env /app/.env
COPY sniffer.py /app/sniffer.py
COPY cicflowmeter /app/cicflowmeter
COPY adapt.py /app/adapt.py
COPY model.pkl /app
COPY scaler.pkl /app
COPY ipca_mit_size_34.pkl /app


WORKDIR /app

# For debugging mostly
ENV AM_I_IN_A_DOCKER_CONTAINER=Yes

CMD ["/usr/bin/python3", "-u", "sniffer.py"]